<view><uni-nav-bar vue-id="60337e2e-1" status-bar="{{true}}" title="点餐" shadow="{{false}}" fixed="{{true}}" left-icon="back" data-event-opts="{{[['^clickLeft',[['clickLeft']]]]}}" bind:clickLeft="__e" bind:__l="__l"></uni-nav-bar><view class="container"><view class="main"><view class="nav"><view class="header"><block wx:if="{{$store.state.orderType=='takein'}}"><view class="nav_left"><view data-event-opts="{{[['tap',[['toShopAddress',['$event']]]]]}}" class="store-name" bindtap="__e"><text>{{currentStoreInfo.Name}}<text hidden="{{!(currentStoreInfo.Address)}}" class="iconfont icon-jiantou"></text></text></view><view class="store-location"><image src="/static/images/order/location.png"></image><text style="color:#919293;">{{"距离您 "+currentStoreInfo.Length}}</text></view></view></block><block wx:else><view class="nav_left overflow-hidden"><view class="nav_leftAdd"><image style="width:30rpx;height:30rpx;" src="/static/images/order/location.png"></image><view data-event-opts="{{[['tap',[['toAddress',['$event']]]]]}}" class="addresName" bindtap="__e">{{''+addressName.Address+''}}</view></view><view style="color:#919293;">由<text style="margin:0 10rpx;color:#5A5B5C;">{{currentStoreInfo.Name}}</text>配送</view></view></block><view class="nav_right"><view data-event-opts="{{[['tap',[['toziqu',['$event']]]]]}}" class="{{['dinein',($store.state.orderType=='takein')?'active':'']}}" bindtap="__e"><text>自取</text></view><view data-event-opts="{{[['tap',[['toAddress',['$event']]]]]}}" class="{{['takeout',($store.state.orderType=='takeout')?'active':'']}}" bindtap="__e"><text>外卖</text></view></view></view><view class="coupon"><text class="title">"霸气mini卡"超级购券活动，赶紧去购买</text><view class="iconfont iconarrow-right"></view></view></view><view class="content"><scroll-view class="menus" scroll-into-view="{{menuScrollIntoView}}" scroll-with-animation="{{true}}" scroll-y="{{true}}"><view class="wrapper"><block wx:for="{{goods}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['menu',(item.SID===currentCateId)?'current':'']}}" id="{{'menu-'+item.SID}}" data-event-opts="{{[['tap',[['handleMenuTap',['$0',index],[[['goods','',index,'SID']]]]]]]}}" bindtap="__e"><text>{{item.Name}}</text><view hidden="{{!(item.cartNum)}}" class="dot">{{item.cartNum}}</view></view></block></view></scroll-view><scroll-view class="goods" scroll-with-animation="{{true}}" scroll-y="{{true}}" scroll-top="{{cateScrollTop}}" data-event-opts="{{[['scroll',[['handleGoodsScroll',['$event']]]]]}}" bindscroll="__e"><view class="wrapper"><swiper class="ads" id="ads" autoplay="true" circular="true" indicatorDots="true" indicator-active-color="#ffaa00"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><swiper-item><view class="swiper-item"><image src="{{item.f0}}" mode="aspectFill"></image></view></swiper-item></block></swiper><view class="list"><view class="category"><view class="title"><text>{{currentType.Name}}</text></view><view class="items"><block wx:for="{{$root.l1}}" wx:for-item="good" wx:for-index="key" wx:key="key"><view class="good"><image class="image" src="{{good.f1}}" data-event-opts="{{[['tap',[['addCart',['$0'],[[['goods_list','',key]]]]]]]}}" bindtap="__e"></image><view class="right"><text class="name">{{good.$orig.Name}}</text><text class="tips">{{good.$orig.Describe}}</text><view class="price_and_action"><text class="price">{{"￥"+good.$orig.SalePrice}}</text><block wx:if="{{good.$orig.SpecType=='2'}}"><view class="btn-group"><button class="btn property_btn" style="background-color:#ADB838;color:#fff;" hover-class="none" size="mini" data-event-opts="{{[['tap',[['addCart',['$0'],[[['goods_list','',key]]]]]]]}}" bindtap="__e">选规格</button><view hidden="{{!(good.$orig.cartNum)}}" class="dot">{{good.$orig.cartNum}}</view></view></block><block wx:else><view class="btn-group"><button hidden="{{!(good.$orig.cartNum)}}" class="btn reduce_btn" style="color:#b9b7b7;border:1px solid #b9b7b7;" type="default" plain="{{true}}" size="mini" hover-class="none" data-event-opts="{{[['tap',[['handleReduceFromCart',['$0'],[[['goods_list','',key]]]]]]]}}" bindtap="__e"><text class="iconSty">-</text></button><view hidden="{{!(good.$orig.cartNum)}}" class="number">{{good.$orig.cartNum}}</view><button class="btn add_btn" style="background-color:#ADB838;" type="primary" size="min" hover-class="none" data-event-opts="{{[['tap',[['handleAddToCart',['$0',1,'单规格'],[[['goods_list','',key]]]]]]]}}" bindtap="__e"><text class="iconStyAdd">+</text></button></view></block></view></view></view></block></view></view></view></view></scroll-view></view><block wx:if="{{cart.length>0}}"><view class="cart-box"><view class="mark"><image class="cart-img" src="/static/images/menu/cart.png" data-event-opts="{{[['tap',[['openCartPopup',['$event']]]]]}}" bindtap="__e"></image><view class="tag">{{getCartGoodsNumber}}</view></view><view class="flexBtn"><view class="price">{{"￥"+getCartGoodsPrice}}</view><button class="pay-btn" type="primary" disabled="{{disabledPay}}" data-event-opts="{{[['tap',[['toPay',['$event']]]]]}}" bindtap="__e">{{''+(disabledPay?'差'+spread+'元起送':'去结算')+''}}</button></view></view></block></view><modal class="good-detail-modal" vue-id="60337e2e-2" show="{{goodDetailModalVisible}}" color="#5A5B5C" width="90%" custom="{{true}}" padding="0rpx" radius="12rpx" bind:__l="__l" vue-slots="{{['default']}}"><view class="cover"><image class="image" src="{{$root.f2}}"></image><view class="btn-group2"><image src="/static/images/menu/close.png" data-event-opts="{{[['tap',[['closeGoodDetailModal',['$event']]]]]}}" bindtap="__e"></image></view></view><scroll-view class="detail" scroll-y="{{true}}"><view class="wrapper"><view class="basic"><view class="name">{{goodsInfo.Name}}</view><view class="tips">{{goodsInfo.Tip}}</view></view><block wx:if="{{goodsInfo.SpecType==='2'}}"><view class="properties"><view class="titleSty">规格</view><view class="specBox"><block wx:for="{{normsList}}" wx:for-item="item" wx:for-index="index" wx:key="SID"><view data-event-opts="{{[['tap',[['skuTopChoice',[index,'$0'],[[['normsList','SID',item.SID]]]]]]]}}" class="{{['static',(currentIndex===index)?'isActive':'']}}" bindtap="__e"><view class="guige">{{''+item.Name+''}}</view></view></block></view><block wx:if="{{kouwei}}"><view class="favo"><view class="titleSty">口味</view><block wx:for="{{kouwei}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="teast"><view data-event-opts="{{[['tap',[['skuTopChoicekw',[index,'$0'],[[['kouwei','',index]]]]]]]}}" class="{{[currentIndex2===index?'testBoxCheck':'testBox']}}" bindtap="__e">{{item}}</view></view></block></view></block><block wx:if="{{goodsInfo.MaxBuyCnt&&goodsInfo.MaxBuyCnt>0}}"><view class="skuTopInfoLimit">{{"(每人限购"+goodsInfo.MaxBuyCnt+'件)'}}</view></block></view></block><block wx:else><block wx:if="{{kouwei2}}"><view class="properties"><view class="favo"><view class="titleSty">口味</view><view class="teast"><view class="testBoxCheck">{{kouwei2}}</view></view></view></view></block></block></view></scroll-view><view class="action"><view class="left"><view class="price">{{"￥"+goodsInfo.SalePrice}}</view><block wx:if="{{goodsInfo.SpecType==='2'}}"><view class="props">{{''+(this.normsList&&this.normsList.length&&this.normsList[this.currentIndex].Name+'\n\t\t\t\t\t\t'+$root.g0[currentIndex2])+''}}</view></block><block wx:if="{{goodsInfo.SpecType==='1'}}"><view class="props"></view></block></view><view class="btn-group"><button class="btn reduce_btn" style="color:#b9b7b7;border:1px solid #b9b7b7;" type="default" plain="{{true}}" size="mini" hover-class="none" data-event-opts="{{[['tap',[['handlePropertyReduce',['$event']]]]]}}" bindtap="__e"><text class="iconSty" style="background:#fff;">-</text></button><view class="number">{{good.number}}</view><button class="btn" type="primary" size="min" hover-class="none" data-event-opts="{{[['tap',[['handlePropertyAdd',['$event']]]]]}}" bindtap="__e"><text class="iconStyAdd">+</text></button></view></view><view data-event-opts="{{[['tap',[['AddToCartInModal',['$0'],['goodsInfo']]]]]}}" class="add-to-cart-btn" bindtap="__e"><view>加入购物车</view></view></modal><popup-layer class="cart-popup" style="z-index:99;" vue-id="60337e2e-3" direction="top" show-pop="{{cartPopupVisible}}" bind:__l="__l" vue-slots="{{['content']}}"><view slot="content"><view class="top"><text data-event-opts="{{[['tap',[['handleCartClear',['$event']]]]]}}" bindtap="__e">清空</text></view><scroll-view class="cart-list" scroll-y="{{true}}"><view class="wrapper"><block wx:for="{{cart}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="item"><view class="left"><view class="name">{{item.Name}}</view></view><view class="center"><text>{{"￥"+item.SalePrice}}</text></view><view class="right"><button class="btn" type="default" plain="{{true}}" size="mini" hover-class="none" data-event-opts="{{[['tap',[['handleCartItemReduce',[index,'$0'],[[['cart','',index]]]]]]]}}" bindtap="__e">-</button><view class="number">{{item.BuyCnt}}</view><button class="btn" style="background-color:#ADB838;" type="primary" size="min" hover-class="none" data-event-opts="{{[['tap',[['handleCartItemAdd',[index,'$0'],[[['cart','',index]]]]]]]}}" bindtap="__e">+</button></view></view></block></view></scroll-view></view></popup-layer></view></view>