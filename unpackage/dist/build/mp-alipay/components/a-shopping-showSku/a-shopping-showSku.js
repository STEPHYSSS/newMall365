;my.defineComponent || (my.defineComponent = Component);(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["components/a-shopping-showSku/a-shopping-showSku"],{2378:function(t,e,r){"use strict";r.r(e);var i=r("c025"),n=r("a43d");for(var s in n)"default"!==s&&function(t){r.d(e,t,(function(){return n[t]}))}(s);r("2b95");var o,a=r("f0c5"),u=Object(a["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=u.exports},"2b95":function(t,e,r){"use strict";var i=r("cbb4"),n=r.n(i);n.a},"6d67":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(r("4795")),n=r("57bb"),s=r("657b");function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e,r,i,n,s,o){try{var a=t[s](o),u=a.value}catch(c){return void r(c)}a.done?e(u):Promise.resolve(u).then(i,n)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var s=t.apply(e,r);function o(t){a(s,i,n,o,u,"next",t)}function u(t){a(s,i,n,o,u,"throw",t)}o(void 0)}))}}function c(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=h(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,n,s=!0,o=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return s=t.done,t},e:function(t){o=!0,n=t},f:function(){try{s||null==i.return||i.return()}finally{if(o)throw n}}}}function h(t,e){if(t){if("string"===typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var l={name:"showSku",props:{show:Boolean,seckill:{type:String,default:function(){return""}},isBrowse:{type:String,default:function(){return""}},skuDataInfo:Object},data:function(){return{mainStyle:getApp().globalData.mainStyle,mainColor:getApp().globalData.mainColor,isShow:!1,showImg:!1,menuScrollIntoView:"",currentIndex:0,valueStepper:1,objProdInfo:{},maxPrice:"",minPrice:"",maxMemberPrice:"",minMemberPrice:"",resultPrice:0,images:"https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2174909441,2495215020&fm=26&gp=0.jpg",disabledPay:!1,options:[],IsGoodBuyTime:!1,buttonGroup:[{text:"加入购物车",backgroundColor:"#ffa200",color:"#fff",borderRadius:"25px 0 0 25px"},{text:"立即购买",backgroundColor:getApp().globalData.mainColor,color:"#fff",borderRadius:"0 25px 25px 0"}],normsList:[],PartsList:[],attributeList:[],goodsInfo:{},currentNorms:{},checkStatic:{},currentParts:[],currentTastArr:[],SpecResultPrice:0}},created:function(){this.seckill&&(this.buttonGroup=[{text:"立即购买",backgroundColor:getApp().globalData.mainColor,color:"#fff",borderRadius:"25px"}])},computed:{isActiveName:function(){return function(t,e){var r,i=c(this.checkStatic);try{for(i.s();!(r=i.n()).done;){var n=r.value;if(t===n.Value.Name&&n.Name===e.Name)return"isActive"}}catch(s){i.e(s)}finally{i.f()}return""}},sumPrice:function(){var t=this;if("1"===this.goodsInfo.SpecType){this.resultPrice=0;var e=Number(this.goodsInfo.SalePrice);return(this.goodsInfo.MemberPrice||0==this.goodsInfo.MemberPrice)&&(e=Number(this.goodsInfo.MemberPrice)),this.skuDataInfo.AttributeList&&this.checkStatic.length>0&&this.checkStatic.forEach((function(e){e.Value.Name&&(t.resultPrice+=isNaN(Number(e.Value.Price))?0:Number(e.Value.Price))})),this.resultPrice=(this.resultPrice+e)*this.valueStepper,this.resultPrice=parseFloat(this.resultPrice.toFixed(2)),this.resultPrice}this.SpecResultPrice=0;var r=Number(this.currentNorms.SalePrice);return(this.currentNorms.MemberPrice||0==this.currentNorms.MemberPrice)&&(r=Number(this.currentNorms.MemberPrice)),this.skuDataInfo.AttributeList&&this.checkStatic.length>0&&this.checkStatic.forEach((function(e){e.Value.Name&&(t.SpecResultPrice+=isNaN(Number(e.Value.Price))?0:Number(e.Value.Price))})),this.SpecResultPrice=(this.SpecResultPrice+r)*this.valueStepper,this.SpecResultPrice=parseFloat(this.SpecResultPrice.toFixed(2)),this.SpecResultPrice}},methods:{isDuringDate:function(t,e){var r=new Date,i=r.getFullYear(),n=r.getMonth()+1,s=r.getDate();n<10&&(n="0"+n),s<10&&(s="0"+s);var o=i+"-"+n+"-"+s,a=r.getHours();a=a<10?"0"+a:a;var u=r.getMinutes(),c=r.getSeconds();u=u<10?"0"+u:u,c=c<10?"0"+c:c;var h=i+"-"+n+"-"+s+" "+a+":"+u+":"+c,f=o+" "+t,l=o+" "+e;return h>=f&&h<=l},onClickButton:function(t){var e=this;return u(i.default.mark((function r(){var s,o,a,u,h,f,l,p,m,d,b;return i.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.isBrowse){r.next=2;break}return r.abrupt("return");case 2:if(!("0"!=e.goodsInfo.StockType&&Number(e.goodsInfo.StoreQty)<Number(e.valueStepper))){r.next=5;break}return e.$toast("商品库存不足！"),r.abrupt("return");case 5:if(s=e.currentParts.every((function(t){return Number(t.StoreQty)>0})),s){r.next=9;break}return e.$toast("配件库存不足！"),r.abrupt("return");case 9:if(o=[],a=[],e.currentParts.length>0?(e.currentParts.forEach((function(t){o.push({SID:t.SID,BuyCnt:t.Stepper}),a.push(t.SID)})),a=a.join(",")):(o="",a=""),r.prev=12,u={ProdList:[],Action:"SetShopCart"},h=[],"",f="",e.checkStatic&&e.checkStatic.length){l=c(e.checkStatic);try{for(l.s();!(p=l.n()).done;)m=p.value,m.Value.Name&&(f+=m.Value.Name+("0"===m.Value.Price?"":"￥"+m.Value.Price)+",")}catch(i){l.e(i)}finally{l.f()}f=f.substring(0,f.length-1)}if(h[0]={ProdNo:"2"==e.goodsInfo.SpecType||"3"==e.goodsInfo.SpecType?e.currentNorms.ProdNo:e.goodsInfo.ProdNo,SpecType:e.goodsInfo.SpecType,BuyCnt:e.valueStepper,ProdSID:e.goodsInfo.SID,SpecSID:"2"==e.goodsInfo.SpecType||"3"==e.goodsInfo.SpecType?e.currentNorms.SID:"",ProdType:0,PartsNo:a,PartsList:o?JSON.stringify(o):"",ParamInfo:e.currentTastArr.length>0?e.currentTastArr:f,PromotionSID:e.currentNorms.hasOwnProperty("PromotionSID")?e.currentNorms.PromotionSID:""},u.ProdList=JSON.stringify(h),0!==t.index||e.seckill){r.next=27;break}return r.next=23,(0,n.vipCard)(u,"UMemberOpera");case 23:d=r.sent,d.Message&&(e.$toast.success("成功加入购物车"),e.isShow=!1,e.$refs.popupSku.close()),r.next=30;break;case 27:e.seckill&&(h[0].PromotionItemSID=e.currentNorms.SID),b=[h[0]],b.length>0&&(e.$store.commit("SET_CURRENT_CARD",b),e.$Router.push("/pages/shoppingMall/order/confirmOrder"));case 30:r.next=35;break;case 32:r.prev=32,r.t0=r["catch"](12),e.$toast.error(r.t0);case 35:case"end":return r.stop()}}),r,null,[[12,32]])})))()},closePopup:function(t){t.show||(this.valueStepper=1,this.$emit("hideShow",this.isShow))},crossIcon:function(){this.$refs.popupSku.close()},skuTopChoice:function(t){this.currentIndex!==t&&(this.currentIndex=t,this.currentNorms=this.normsList[t])},clickStatic:function(t,e,r){var i,n=this,s=c(this.checkStatic);try{for(s.s();!(i=s.n()).done;){var o=i.value;t.Name===o.Name&&(o.Value.Name===e.Name&&"0"==t.Radio?o.Value={}:o.Value=e)}}catch(u){s.e(u)}finally{s.f()}if(this.checkStatic.length>0){this.currentTastArr="";var a=0;this.checkStatic.forEach((function(t){a=Number(t.Value.Price),t.Value.Name&&(n.currentTastArr+=t.Value.Name+(0===a?"":"￥".concat(a))+",")})),this.currentTastArr=this.currentTastArr.substring(0,this.currentTastArr.length-1)}},skuTopChoiceParts:function(t,e){t.inputValue>0?this.$set(this.PartsList[e],"isActive",!0):this.$set(this.PartsList[e],"isActive",!1);var r=this.PartsList;r.forEach((function(i){r[e].Stepper=t.inputValue}));var i=r.filter((function(t){return 0!==Number(t.Stepper)}));this.currentParts=p("parts",i)},stepperMain:function(t){this.valueStepper=t.inputValue},overlimitParts:function(t){},setStepperMax:function(){return"0"===this.goodsInfo.StockType?Number(this.goodsInfo.MaxBuyCnt="99"):Number(this.goodsInfo.MaxBuyCnt)<Number(this.goodsInfo.StoreQty)&&Number(this.goodsInfo.MaxBuyCnt)?Number(this.goodsInfo.MaxBuyCnt):Number(this.goodsInfo.StoreQty)},overlimit:function(t){if("minus"===t&&this.$toast("至少选择一件"),"plus"===t){var e="";e=Number(this.goodsInfo.MaxBuyCnt)<Number(this.goodsInfo.StoreQty)&&Number(this.goodsInfo.MaxBuyCnt)?"每人限购"+this.goodsInfo.MaxBuyCnt+"件":"该商品库存不足",this.$toast(e)}},viewImg:function(t){this.$refs.imgPopup.open(),this.showImg=!0,this.images=(0,s.GetBaseImgUrl)()+t}},watch:{show:function(t){var e=this;if(this.isShow=t,t){this.$refs.popupSku.open();var r=this.skuDataInfo;if(this.goodsInfo=r.ProdInfo,this.normsList=[],this.PartsList=[],this.attributeList=[],r.SpecList&&(this.normsList=r.SpecList||[],this.currentNorms=this.normsList[0],this.maxPrice=Math.max.apply(Math,this.skuDataInfo.SpecList.map((function(t){return Number(t.SalePrice)}))),this.minPrice=Math.min.apply(Math,this.skuDataInfo.SpecList.map((function(t){return Number(t.SalePrice)}))),this.maxMemberPrice=Math.max.apply(Math,this.skuDataInfo.SpecList.map((function(t){return Number(t.MemberPrice)}))),this.minMemberPrice=Math.min.apply(Math,this.skuDataInfo.SpecList.map((function(t){return Number(t.MemberPrice)})))),r.PartsList&&(this.PartsList=r.PartsList||[]),r.AttributeList&&(this.attributeList=r.AttributeList||[],this.checkStatic=this.attributeList.map((function(t){var e=t.Value.find((function(t){return"1"==t.IsDefault})),r=0;1==t.Radio&&(r=1);var i=1;return e||(e={Name:"",Price:""},i=0),{Name:t.Name,IsDefault:i,Radio:r,Value:e}}))),void 0!=this.goodsInfo.BuyTime){var i=this.goodsInfo.BuyTime.split(",");this.IsGoodBuyTime=this.isDuringDate(i[0],i[1])}else this.IsGoodBuyTime=!0;this.disabledPay="0"===this.skuDataInfo.IsBuy,this.PartsList=r.PartsList||[],this.PartsList.forEach((function(t){e.$set(t,"Stepper",0)})),this.currentIndex=0}else this.$refs.popupSku.close(),this.normsList=[],this.PartsList=[],this.attributeList=[],this.partsList&&this.partsList.length&&this.partsList.forEach((function(t){e.$set(t,"isActive",!1)}))}}};function p(t,e){function r(t){var e=null;return"parts"===t?(e="ProdNo",function(t,r){var i=t[e],n=r[e];return i-n}):(e="Name",function(t,r){return t[e].localeCompare(r[e],"zh-CN")})}return e=e.sort(r(t)),e}e.default=l},a43d:function(t,e,r){"use strict";r.r(e);var i=r("6d67"),n=r.n(i);for(var s in i)"default"!==s&&function(t){r.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},c025:function(t,e,r){"use strict";var i,n=function(){},s=[];r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return s})),r.d(e,"a",(function(){return i}))},cbb4:function(t,e,r){}}]);
;(my["webpackJsonp"] = my["webpackJsonp"] || []).push([
    'components/a-shopping-showSku/a-shopping-showSku-create-component',
    {
        'components/a-shopping-showSku/a-shopping-showSku-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('c11b')['createComponent'](__webpack_require__("2378"))
        })
    },
    [['components/a-shopping-showSku/a-shopping-showSku-create-component']]
]);
