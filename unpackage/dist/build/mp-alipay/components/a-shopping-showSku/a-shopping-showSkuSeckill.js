;my.defineComponent || (my.defineComponent = Component);(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["components/a-shopping-showSku/a-shopping-showSkuSeckill"],{"06cb":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(r("4795"));r("57bb");function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e,r,o,i,n,s){try{var u=t[n](s),a=u.value}catch(c){return void r(c)}u.done?e(a):Promise.resolve(a).then(o,i)}function s(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var s=t.apply(e,r);function u(t){n(s,o,i,u,a,"next",t)}function a(t){n(s,o,i,u,a,"throw",t)}u(void 0)}))}}function u(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=a(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,n=!0,s=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return n=t.done,t},e:function(t){s=!0,i=t},f:function(){try{n||null==o.return||o.return()}finally{if(s)throw i}}}}function a(t,e){if(t){if("string"===typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}var f=function(){r.e("components/uni-goods-nav/uni-goods-navSeckill").then(function(){return resolve(r("9463"))}.bind(null,r)).catch(r.oe)},h={name:"showSku",props:{show:Boolean,seckill:{type:String,default:function(){return""}},isBrowse:{type:String,default:function(){return""}},skuDataInfo:Object},data:function(){return{mainStyle:getApp().globalData.mainStyle,mainColor:getApp().globalData.mainColor,isShow:!1,showImg:!1,currentIndex:0,valueStepper:1,objProdInfo:{},images:"https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2174909441,2495215020&fm=26&gp=0.jpg",disabledPay:!1,options:[],buttonGroup:[{text:"加入购物车",backgroundColor:"#ffa200",color:"#fff",borderRadius:"25px 0 0 25px"},{text:"立即购买",backgroundColor:getApp().globalData.mainColor,color:"#fff",borderRadius:"0 25px 25px 0"}],normsList:[],PartsList:[],attributeList:[],goodsInfo:{},currentNorms:{},checkStatic:{},currentParts:[],currentTastArr:[],TotalSurplusQty:0,resultPrice:0}},components:{navSeckill:f},created:function(){this.seckill&&(this.buttonGroup=[{text:"立即购买",backgroundColor:"#fe5252",color:"#fff",borderRadius:"25px"}])},computed:{isActiveName:function(){return function(t){var e,r=u(this.checkStatic);try{for(r.s();!(e=r.n()).done;){var o=e.value;if(t===o.Value.Name&&o.Name===value.Name)return"isActive"}}catch(i){r.e(i)}finally{r.f()}return""}},sumPrice:function(){var t=this;if("1"===this.goodsInfo.SpecType){this.resultPrice=0;var e=Number(this.goodsInfo.SalePrice);return(this.goodsInfo.MemberPrice||0==this.goodsInfo.MemberPrice)&&(e=Number(this.goodsInfo.MemberPrice)),this.skuDataInfo.AttributeList&&this.checkStatic.length>0&&this.checkStatic.forEach((function(e){e.Value.Name&&(t.resultPrice+=isNaN(Number(e.Value.Price))?0:Number(e.Value.Price))})),this.resultPrice=(this.resultPrice+e)*this.valueStepper,this.resultPrice=parseFloat(this.resultPrice.toFixed(2)),this.resultPrice}this.SpecResultPrice=0;var r=Number(this.goodsInfo.SalePrice);return(this.goodsInfo.MemberPrice||0==this.goodsInfo.MemberPrice)&&(r=Number(this.goodsInfo.MemberPrice)),this.skuDataInfo.AttributeList&&this.checkStatic.length>0&&this.checkStatic.forEach((function(e){e.Value.Name&&(t.resultPrice+=isNaN(Number(e.Value.Price))?0:Number(e.Value.Price))})),this.SpecResultPrice=(this.SpecResultPrice+r)*this.valueStepper,console.log(typeof this.SpecResultPrice),this.SpecResultPrice=parseFloat(this.SpecResultPrice.toFixed(2)),this.SpecResultPrice}},methods:{onClickButton:function(t){var e=this;return s(o.default.mark((function r(){var i,n,s,u,a,c,f;return o.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(console.log(t),!e.isBrowse){r.next=3;break}return r.abrupt("return");case 3:if(!("0"!=e.goodsInfo.StockType&&Number(e.goodsInfo.StoreQty)<Number(e.valueStepper))){r.next=6;break}return e.$toast("商品库存不足！"),r.abrupt("return");case 6:if(i=e.currentParts.every((function(t){return Number(t.StoreQty)>0})),i){r.next=10;break}return e.$toast("配件库存不足！"),r.abrupt("return");case 10:n=[],s=[],e.currentParts.length>0?(e.currentParts.forEach((function(t){n.push({SID:t.SID,BuyCnt:t.Stepper}),s.push(t.SID)})),s=s.join(",")):(n="",s="");try{u={ProdList:[],Action:"SetShopCart"},a=[],"",a[0]={ProdNo:"2"==e.goodsInfo.SpecType||"3"==e.goodsInfo.SpecType?e.currentNorms.ProdNo:e.goodsInfo.ProdNo,SpecType:e.goodsInfo.SpecType,BuyCnt:e.valueStepper,ProdSID:e.goodsInfo.SID,SpecSID:"2"==e.goodsInfo.SpecType||"3"==e.goodsInfo.SpecType?e.goodsInfo.SpecSID:"",ProdType:e.goodsInfo.ProdType,PartsNo:s,PartsList:n?JSON.stringify(n):"",ParamInfo:e.currentTastArr,PromotionItemSID:e.goodsInfo.PromotionItemSID},u.ProdList=JSON.stringify(a),c=u.ProdList,f=[a[0]],"1"===e.goodsInfo.ProdType?c.length>0&&(e.$store.commit("SET_CURRENT_CARD",c),e.$Router.push("/pages/shoppingMall/order/confirmOrderTic")):f.length>0&&(e.$store.commit("SET_CURRENT_CARD",f),e.$Router.push("/pages/shoppingMall/order/confirmOrder"))}catch(o){e.$toast.error(o)}case 14:case"end":return r.stop()}}),r)})))()},closePopup:function(t){t.show||(this.valueStepper=1,this.$emit("hideShow",this.isShow))},crossIcon:function(){this.$refs.popupSku.close()},skuTopChoice:function(t){this.currentIndex!==t&&(this.currentIndex=t,this.currentNorms=this.normsList[t])},clickStatic:function(t,e,r){var o,i=this,n=u(this.checkStatic);try{for(n.s();!(o=n.n()).done;){var s=o.value;t.Name===s.Name&&(s.Value.Name===e.Name?s.Value={}:s.Value=e)}}catch(c){n.e(c)}finally{n.f()}if(this.checkStatic.length>0){this.currentTastArr="";var a=0;this.checkStatic.forEach((function(t){a=Number(t.Value.Price),t.Value.Name&&(i.currentTastArr+=t.Value.Name+(0===a?"":"￥".concat(a))+",")})),this.currentTastArr=this.currentTastArr.substring(0,this.currentTastArr.length-1)}},skuTopChoiceParts:function(t,e){t.inputValue>0?this.$set(this.PartsList[e],"isActive",!0):this.$set(this.PartsList[e],"isActive",!1);var r=this.PartsList;r.forEach((function(o){r[e].Stepper=t.inputValue}));var o=r.filter((function(t){return 0!==Number(t.Stepper)}));this.currentParts=l("parts",o)},stepperMain:function(t){this.valueStepper=t.inputValue},overlimitParts:function(t){},setStepperMax:function(){if("0"===this.goodsInfo.StockType){if(Number(this.valueStepper)>=Number(this.TotalSurplusQty))return Number(this.TotalSurplusQty);if(Number(this.valueStepper)>=Number(this.goodsInfo.MaxBuyCnt))return Number(this.goodsInfo.MaxBuyCnt)}else{if(Number(this.goodsInfo.StoreQty)<=Number(this.goodsInfo.MaxBuyCnt))return Number(this.goodsInfo.StoreQty);if(Number(this.TotalSurplusQty)<=Number(this.goodsInfo.MaxBuyCnt))return Number(this.TotalSurplusQty);if(Number(this.valueStepper)>=Number(this.goodsInfo.MaxBuyCnt))return Number(this.goodsInfo.MaxBuyCnt)}},overlimit:function(t){if("minus"===t&&this.$toast("至少选择一件"),"plus"===t){var e="";"0"===this.goodsInfo.StockType?Number(this.valueStepper)>=Number(this.TotalSurplusQty)?e="活动库存不足":Number(this.valueStepper)>=Number(this.goodsInfo.MaxBuyCnt)&&(e="每人限购"+this.goodsInfo.MaxBuyCnt+"件"):Number(this.goodsInfo.StoreQty)<=Number(this.goodsInfo.MaxBuyCnt)?e="商品库存不足":Number(this.TotalSurplusQty)<=Number(this.goodsInfo.MaxBuyCnt)?e="活动库存不足":Number(this.valueStepper)>=Number(this.goodsInfo.MaxBuyCnt)&&(e="每人限购"+this.goodsInfo.MaxBuyCnt+"件"),this.$toast(e)}},viewImg:function(t){this.$refs.imgPopup.open(),this.showImg=!0,this.images=this.$VUE_APP_PREFIX+t}},watch:{show:function(t){var e=this;if(this.isShow=t,t){this.$refs.popupSku.open();var r=this.skuDataInfo;this.TotalSurplusQty=r.TotalSurplusQty,this.goodsInfo=r.ProdInfo,this.normsList=[],this.PartsList=[],this.attributeList=[],r.PartsList&&(this.PartsList=r.PartsList||[]),r.AttributeList&&(this.attributeList=r.AttributeList||[],this.checkStatic=this.attributeList.map((function(t){return{Name:t.Name,Value:{Name:"",Price:""}}}))),this.disabledPay="0"===this.skuDataInfo.IsBuy,this.PartsList=r.PartsList||[],this.PartsList.forEach((function(t){e.$set(t,"Stepper",0)})),this.currentIndex=0}else this.$refs.popupSku.close(),this.normsList=[],this.PartsList=[],this.attributeList=[],this.partsList.forEach((function(t){e.$set(t,"isActive",!1)}))}}};function l(t,e){function r(t){var e=null;return"parts"===t?(e="ProdNo",function(t,r){var o=t[e],i=r[e];return o-i}):(e="Name",function(t,r){return t[e].localeCompare(r[e],"zh-CN")})}return e=e.sort(r(t)),e}e.default=h},"0925":function(t,e,r){},2855:function(t,e,r){"use strict";r.r(e);var o=r("c4af"),i=r("d228");for(var n in i)"default"!==n&&function(t){r.d(e,t,(function(){return i[t]}))}(n);r("ff2d");var s,u=r("f0c5"),a=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);e["default"]=a.exports},c4af:function(t,e,r){"use strict";var o,i=function(){},n=[];r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return n})),r.d(e,"a",(function(){return o}))},d228:function(t,e,r){"use strict";r.r(e);var o=r("06cb"),i=r.n(o);for(var n in o)"default"!==n&&function(t){r.d(e,t,(function(){return o[t]}))}(n);e["default"]=i.a},ff2d:function(t,e,r){"use strict";var o=r("0925"),i=r.n(o);i.a}}]);
;(my["webpackJsonp"] = my["webpackJsonp"] || []).push([
    'components/a-shopping-showSku/a-shopping-showSkuSeckill-create-component',
    {
        'components/a-shopping-showSku/a-shopping-showSkuSeckill-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('c11b')['createComponent'](__webpack_require__("2855"))
        })
    },
    [['components/a-shopping-showSku/a-shopping-showSkuSeckill-create-component']]
]);
