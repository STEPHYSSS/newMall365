(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/shoppingMall/order/confirmOrder"],{"08ba":function(e,t,r){},"3c00":function(e,t,r){"use strict";r.r(t);var i=r("5094"),a=r("854b");for(var n in a)"default"!==n&&function(e){r.d(t,e,(function(){return a[e]}))}(n);r("a7a5");var o,s=r("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);t["default"]=c.exports},"3d38":function(e,t,r){"use strict";(function(e){r("d977");i(r("66fd"));var t=i(r("3c00"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("c11b")["createPage"])},5094:function(e,t,r){"use strict";var i={uniNavBar:function(){return r.e("components/uni-nav-bar/uni-nav-bar").then(r.bind(null,"44c0"))},aNodeData:function(){return r.e("components/a-nodeData/a-nodeData").then(r.bind(null,"f6d5"))},aBottomSubmit:function(){return r.e("components/a-bottomSubmit/a-bottomSubmit").then(r.bind(null,"77bb"))},uniPopup:function(){return r.e("components/uni-popup/uni-popup").then(r.bind(null,"a329"))},uniIcons:function(){return Promise.all([r.e("common/vendor"),r.e("components/uni-icons/uni-icons")]).then(r.bind(null,"6508"))},aReceiveAddress:function(){return Promise.all([r.e("common/vendor"),r.e("components/a-receive-address/a-receive-address")]).then(r.bind(null,"8247"))}},a=function(){var e=this,t=e.$createElement,i=(e._self._c,JSON.stringify(e.currentArea)),a=e._f("setSex2")(e.currentArea.Sex),n=e.prodList[0].DeliveryType.indexOf("3"),o=r("0697"),s=e.allData.hasOwnProperty("CardInfo"),c=r("0697"),u=Number(e.CardInfo.Balance),d=r("8703"),l=e.__map(e.areaList,(function(t,r){var i=e._f("setSex2")(t.Sex);return{$orig:e.__get_orig(t),f1:i}}));e._isMounted||(e.e0=function(t){return e.$refs.showAreaList.close()}),e.$mp.data=Object.assign({},{$root:{g0:i,f0:a,g1:n,m0:o,g2:s,m1:c,m2:u,m3:d,l0:l}})},n=[];r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return i}))},"854b":function(e,t,r){"use strict";r.r(t);var i=r("f1e0"),a=r.n(i);for(var n in i)"default"!==n&&function(e){r.d(t,e,(function(){return i[e]}))}(n);t["default"]=a.a},a7a5:function(e,t,r){"use strict";var i=r("08ba"),a=r.n(i);a.a},f1e0:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(r("4795")),a=r("57bb"),n=r("657b"),o=s(r("c1d6"));s(r("b867"));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r,i,a,n,o){try{var s=e[n](o),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(i,a)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var n=e.apply(t,r);function o(e){c(n,i,a,o,s,"next",e)}function s(e){c(n,i,a,o,s,"throw",e)}o(void 0)}))}}var d=function(){r.e("node-modules/adcell/ADCell").then(function(){return resolve(r("1420"))}.bind(null,r)).catch(r.oe)},l=function(){Promise.all([r.e("common/vendor"),r.e("components/a-good-lineBox/a-good-lineBoxConfirm")]).then(function(){return resolve(r("ddfa"))}.bind(null,r)).catch(r.oe)},f={name:"confirmOrder",components:{adCell:d,lineBoxConfirm:l},computed:{computedSumTotal:function(){return this.total}},data:function(){return{mainStyle:getApp().globalData.mainStyle,mainColor:getApp().globalData.mainColor,isDisabled:!1,loading:!0,ProdJsonList:[],currentItem:[],UserRemarks:"",UserTime:"",UserDiscount:"",UserDiscountName:"请选择方案",UserTicketName:"请选择电子券",interestName:"请选择权益",showSID:"",currentArea:{},radioModes:2,prodList:[],showAreaList:!1,addEditArea:!1,selectTime:!1,discountProgram:!1,ticketProgram:!1,payTypePop:!1,interestProgram:!1,resultArea:"",areaList:[],DeliveryAreaList:[],takeOver:[],freight:0,total:0,totalCurrent:0,activeKey:0,sidebarList:[],rightTimeList:[],radioTime:"",radioPayType:"1",CardInfo:{},phone_user:"",name_user:"",orderId:"",cardSids:[],ProdTotal:0,allTimeSlot:[],RecordTime:{},areaInfo:{},currentDeliveryType:"",testData:{},allData:{},totalCurrentScore:0,currentIndex:0,location:{},takeDeliveryTpey:"",isMember:localStorage.getItem("isMember"),password:"",IsPass:"",ScoreDeduction:"",ScoreAmt:"",allck:!0,menuScrollIntoView:"",CardType:localStorage.getItem("CardType"),radioDiscount:"",DiscountList:[],DiscPrice:"",TicketPrice:"",TicketList:[],radioTicket:"",BeneList:[],BeneNo:"",radioBene:"",objPrice:{},FloatList:[]}},created:function(){var e=this;return u(i.default.mark((function t(){var r;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.state.currentCard&&0!==e.$store.state.currentCard.length||(e.$Router.back(2),e.$Router.back(100)),"0"===e.CardType&&(e.radioPayType="2"),t.next=4,e.getWxConfig();case 4:if(r=e.$store.state.currentCard||[],r.forEach((function(t){if(t.SID&&e.cardSids.push(t.SID),t.PartsNo instanceof Array){var r=[],i=JSON.parse(JSON.stringify(t.PartsNo));i.forEach((function(e){r.push(e.ProdNo)})),t.PartsNo=r.join(",")}})),e.ProdJsonList=JSON.stringify(r),e.currentItem=JSON.stringify(r),e.cardSids=e.cardSids?e.cardSids.join(","):"",!e.$Route.query.isIntegral){t.next=14;break}return t.next=12,e.getInfoIntegral();case 12:t.next=16;break;case 14:return t.next=16,e.getInfo();case 16:case"end":return t.stop()}}),t)})))()},mounted:function(){if("takein"===this.$store.state.orderType){this.radioModes=1,this.takeDeliveryTpey="1";var e=JSON.parse(localStorage.getItem("currentStoreInfo"));this.currentArea=e.data}else this.takeDeliveryTpey="2",this.currentArea=JSON.parse(sessionStorage.getItem("takeOutAddress"))},methods:{getInfo:function(){var t=this;return u(i.default.mark((function r(){var o,s,c,u,d;return i.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.loading=!0,e.showLoading();try{o=JSON.parse(t.currentItem),s="",c="","takein"===t.$store.state.orderType&&(s=t.$store.state.currentLocation.longitude?t.$store.state.currentLocation.longitude:"",c=t.$store.state.currentLocation.latitude?t.$store.state.currentLocation.latitude:""),u=JSON.parse(localStorage.getItem("currentStoreInfo")),d={Action:"SettlePay",ProdList:t.currentItem,Longitude:"takein"===t.$store.state.orderType?s:t.currentArea.Longitude,Latitude:"takein"===t.$store.state.orderType?c:t.currentArea.Latitude,DeliveryType:t.takeDeliveryTpey,ShopSID:u?u.data.SID:"",PayType:t.radioPayType},o[0].hasOwnProperty("PromotionItemSID")&&(d.PromotionItemSID=o[0].PromotionItemSID),Promise.all([t.saveArea(!0),(0,a.vipCard)(d,"UProdOpera")]).then((function(r){0==r[1].Success&&e.showToast({title:r[1].message,icon:"none"}),t.takeOver=r[0];var i=r[1].Data;t.allData=i,t.prodList=i.ProdList,t.currentItem=JSON.parse(JSON.stringify(t.prodList)),t.currentDeliveryType=i.ProdList[0].DeliveryType,1===t.radioModes?t.areaList=i.ShopInfoList:t.areaList=i.AddressList,"1"===t.takeDeliveryTpey&&i.AddressList.length>0&&(t.name_user=i.AddressList[0].Name,t.phone_user=i.AddressList[0].Mobile),t.currentItem.forEach((function(e){e.PartsList&&(e.PartsList=JSON.stringify(e.PartsList))})),i.hasOwnProperty("CardInfo")&&(t.IsPass=i.CardInfo.IsPass?i.CardInfo.IsPass:""),t.ScoreDeduction=i.ScoreDeduction,t.ScoreAmt=i.ScoreAmt,t.CardInfo=i.CardInfo,t.freight=i.Freight,t.DiscPrice=i.DiscPrice,t.TicketList=i.TicketList||[],t.TicketPrice=i.TicketPrice,t.DiscountList=i.DiscList||[],t.BeneList=i.BeneList||[],t.TicketList.length>0&&(t.radioTicket=t.TicketList[0].TicketNo,t.UserTicketName=t.TicketList[0].TicketName),t.DiscountList.length>0&&(t.radioDiscount=t.DiscountList[0].PrefNo,t.UserDiscountName=t.DiscountList[0].PrefName),t.BeneList.length>0&&(t.radioBene=t.BeneList[0].BeneSID,t.interestName=t.BeneList[0].BeneName),t.total=i.SumTotal,t.ProdTotal=i.ProdTotal,t.totalCurrent=parseFloat(Number(i.SumTotal).toFixed(2)),t.objPrice={total:t.total,TicketPrice:t.TicketPrice,DiscPrice:t.DiscPrice},t.FloatList=i.FloatList,t.CardInfo=i.hasOwnProperty("CardInfo")?i.CardInfo:{},"{}"!==JSON.stringify(t.CardInfo)?Number(i.CardInfo.Balance)<Number(i.SumTotal)&&(t.radioPayType="2"):t.radioPayType="2",t.DeliveryAreaList=i.ShopInfoList;var a="",o="",s="";t.prodList.length>0&&t.prodList.forEach((function(e,r){e.DeliveryType&&""!==e.DeliveryType&&(e.DeliveryType=e.DeliveryType.split(",")),"1"===e.FinType&&e.FinHour>0?(a=Math.max.apply(Math,t.prodList.map((function(e){return Number(e.FinHour)}))),s=e.FinType):(o=Math.max.apply(Math,t.prodList.map((function(e){return Number(e.FinHour)}))),s=e.FinType)}));var c=Number(i.ShopBase.ScopeDay),u=0,d=h(i.ShopBase.EndTime),l=(h(i.ShopBase.StartTime),h((0,n.getTime)(!1,!1,!0))),f=60*Number(o)*60;if("2"===s){var T=parseInt(i.ShopBase.EndTime)-parseInt(i.ShopBase.StartTime),y=Number(o)/T,g=(Number(o),Number(parseInt(y)));(f+l).toFixed(2)>d?(l>d&&(a=Number(a)+1),a=Number(a)+g,u=Number(o)):(u=Number(o),a=0)}else l>d&&(a=Number(a)+1);t.sidebarList=m(c,a);var v=p(i.ShopBase,u,a),S=v.arr,P=v.arrToday;t.allTimeSlot=S;for(var D=[],L=0;L<P.length-1;L++)D.push(P[L]+"-"+P[L+1]);t.rightTimeList=D,t.todayTimeSlot=D,t.radioTime=D[0],t.RecordTime={radioTime:D[0],index:0},t.UserTime=t.sidebarList[t.activeKey]+" "+t.radioTime,t.loading=!1,e.hideLoading()})).catch((function(r){"超出配送范围"==r?t.$toast("请重新选择地址"):(t.loading=!1,e.hideLoading())}))}catch(i){t.loading=!1,e.hideLoading()}case 3:case"end":return r.stop()}}),r)})))()},getInfoIntegral:function(){var t=this;return u(i.default.mark((function r(){var n,o;return i.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,e.showLoading(),r.next=4,(0,a.vipCard)({Action:"SettlePay",ProdList:t.currentItem},"UIntegralOpera");case 4:n=r.sent,o=n.Data,t.prodList=o.ProdList,t.allData=o,t.CardInfo=o.CardInfo,t.currentItem=JSON.parse(JSON.stringify(t.prodList)),t.totalCurrent=parseFloat(Number(o.SalePriceTotal).toFixed(2)),o.ScoreTotal&&(t.totalCurrentScore=parseFloat(Number(o.ScoreTotal).toFixed(2))||0),t.loading=!1,e.hideLoading(),r.next=20;break;case 16:r.prev=16,r.t0=r["catch"](0),t.loading=!1,e.hideLoading();case 20:case"end":return r.stop()}}),r,null,[[0,16]])})))()},checkChange:function(e){"0"==e.detail.value?(this.allck=!0,this.total=parseFloat((Number(this.total)-Number(this.ScoreAmt)).toFixed(2))):(this.allck=!1,this.total=parseFloat((Number(this.total)+Number(this.ScoreAmt)).toFixed(2)))},orderArea:function(){},getWxConfig:function(){var e=this;return u(i.default.mark((function t(){var r,n;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,a.vipCard)({Action:"GetJSSDK",Url:window.location.href},"UProdOpera");case 3:r=t.sent,n=r.Data,o.default.config({debug:!1,appId:n.SDK.appId,timestamp:n.SDK.timestamp,nonceStr:n.SDK.noncestr,signature:n.SDK.signature,jsApiList:["getLocation","openAddress","scanQRCode"]}),o.default.ready((function(t){var r=e;o.default.getLocation({type:"gcj02",success:function(e){r.location={longitude:e.longitude,latitude:e.latitude},r.$store.commit("SET_CURRENT_LOCATION",r.location),sessionStorage.setItem("location",JSON.stringify(r.location))},cancel:function(e){this.$toast.fail(e)}}),o.default.error((function(e){this.$toast.fail(e),console.log("调用微信接口获取当前位置失败",e)}))})),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$toast.fail(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getAddress:function(){var e=this;o.default.openAddress({success:function(t){e.name_user=t.userName,e.phone_user=t.telNumber},cancel:function(e){this.$toast.fail(e)}})},radioChange:function(){this.showAreaList=!0,this.$refs.showAreaList.open()},radioPayChange:function(e){this.CardInfo&&Number(this.CardInfo.Balance)<this.totalCurrent||(this.radioPayType=e.detail.value)},changeGroup:function(e){this.resultArea=e.detail.value},changeArea:function(t,r){var n=this;return u(i.default.mark((function r(){var o,s,c,u,d;return i.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n.showSID=t.SID,n.showAreaList=!0,n.$refs.showAreaList.open(),JSON.parse(localStorage.getItem("currentStoreInfo")),1===n.radioModes?o="IsPickShop":n.currentDeliveryType.indexOf("2")>-1?o="CalcFreight":n.currentDeliveryType.indexOf("3")>-1&&(o="CalcLogistics"),r.prev=5,n.loading=!0,e.showLoading(),s={Action:o,Latitude:t.Latitude||"",Longitude:t.Longitude||"",ShopSID:1===n.radioModes?t.SID:"",DiscPrice:n.DiscPrice,ProdTotal:n.ProdTotal,TicketPrice:n.TicketPrice,ProdList:JSON.stringify(n.currentItem),ScoreAmt:!0===n.allck?n.ScoreAmt:""},r.next=11,(0,a.vipCard)(s,"UProdOpera");case 11:c=r.sent,u=c.Data,1===n.radioModes?(n.currentArea=t,d=n.currentArea,n.$store.commit("SET_CURRENT_STORE",d)):(n.currentArea=t,n.freight=u.Freight,n.total=u.SumTotal,n.totalCurrent=parseFloat(Number(u.SumTotal).toFixed(2)),sessionStorage.setItem("takeOutAddress",JSON.stringify(n.currentArea))),n.showAreaList=!1,n.$refs.showAreaList.close(),r.next=22;break;case 18:r.prev=18,r.t0=r["catch"](5),n.$toast.fail(r.t0),console.log(r.t0);case 22:case"end":return r.stop()}}),r,null,[[5,18]])})))()},clickEdit:function(e){this.areaInfo=e,this.$refs.addEditArea.open(),this.addEditArea=!0},clickGo:function(){this.$refs.addEditArea.close(),this.addEditArea=!1},clickLeft:function(){this.$Route.query.flag?this.$Router.push({path:"/pages/shoppingMall/menu_naixue/menu/menu",query:{flag:"Deflocation"}}):window.history.back(-1)},clickDataTime:function(){this.selectTime=!0,this.$refs.selectTime.open()},clickUserDiscount:function(){this.discountProgram=!0,this.$refs.discountProgram.open()},clickUserTicketName:function(){this.ticketProgram=!0,this.$refs.ticketProgram.open()},clickinterestName:function(){this.interestProgram=!0,this.$refs.interestProgram.open()},clickTime:function(){},saveAreaSet:function(){var t=this;return u(i.default.mark((function r(){var a;return i.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.$refs.addEditArea.close(),t.addEditArea=!1,t.loading=!0,e.showLoading(),r.next=6,t.saveArea(!1);case 6:a=r.sent,t.areaList=a,t.takeOver=a,t.loading=!1,e.hideLoading();case 11:case"end":return r.stop()}}),r)})))()},saveArea:function(t){var r=this;return u(i.default.mark((function n(){var o,s,c;return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,r.currentDeliveryType.indexOf("2")>-1?o=1:r.currentDeliveryType.indexOf("3")>-1&&(o=2),i.next=4,(0,a.vipCard)({Action:"GetAddressList",Type:o},"UMemberOpera");case 4:return s=i.sent,c=s.Data,t&&e.showLoading(),i.abrupt("return",c.AddressList);case 10:return i.prev=10,i.t0=i["catch"](0),i.abrupt("return",[]);case 13:case"end":return i.stop()}}),n,null,[[0,10]])})))()},PayTypeClick:function(e){this.CardInfo&&Number(this.CardInfo.Balance)<this.totalCurrent||(this.radioPayType=e,this.Discount(e,2))},changeSider:function(e){this.currentIndex=e,this.activeKey=e,this.RecordTime.index===e?this.radioTime=this.RecordTime.radioTime:this.radioTime="";var t=[];if(0!==e){for(var r=0;r<this.allTimeSlot.length-1;r++)t.push(this.allTimeSlot[r]+"-"+this.allTimeSlot[r+1]);this.rightTimeList=t}else this.rightTimeList=this.todayTimeSlot},rightTimeClick:function(e){this.RecordTime={radioTime:e,index:this.activeKey},this.radioTime=e,this.selectTime=!1,this.$refs.selectTime.close(),this.UserTime=this.sidebarList[this.activeKey]+" "+this.radioTime},radioTimeFun:function(e){this.radioTime=e.detail.value},setDiscountClick:function(e){this.radioDiscount=e.detail.value},DiscountClick:function(e,t){"undefined"===e?(this.radioDiscount="undefined",this.UserDiscountName="暂不使用"):(this.UserDiscountName=e.PrefName,this.radioDiscount=e.PrefNo),this.discountProgram=!1,this.Discount(e,1),this.$refs.discountProgram.close()},setTicketClick:function(e){this.radioTicket=e.detail.value},ticketClick:function(e,t){"undefined"===e?(this.radioTicket="undefined",this.UserTicketName="暂不使用"):(this.UserTicketName=e.TicketName,this.radioTicket=e.TicketNo),this.ticketProgram=!1,this.Discount(e,3),this.$refs.ticketProgram.close()},setBeneClick:function(e){this.radioBene=e.detail.value,console.log(this.radioBene)},beneClick:function(e,t){"undefined"===e?(this.radioBene="undefined",this.interestName="暂不使用"):(this.interestName=e.BeneName,this.radioBene=e.BeneSID),this.interestProgram=!1,this.Discount(e,4),this.$refs.interestProgram.close()},Discount:function(e,t){var r=this;return u(i.default.mark((function n(){var o,s,c;return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,o={Action:"SelectDisc",ProdList:r.ProdJsonList,PayType:2===t?e:1,Freight:r.freight,ProdTotal:r.ProdTotal,BeneSID:"undefined"===r.radioBene?"暂不使用":r.radioBene,PrefNo:"undefined"===r.radioDiscount?"暂不使用":r.radioDiscount,TicketNo:"undefined"===r.radioTicket?"暂不使用":r.radioTicket,ScoreAmt:!0===r.allck?r.ScoreAmt:""},i.next=4,(0,a.vipCard)(o,"UProdOpera");case 4:s=i.sent,c=s.Data,2===t&&(r.TicketList=c.TicketList||[],r.DiscountList=c.DiscList||[],r.BeneList=c.BeneList||[]),r.freight=c.Freight,r.DiscPrice=c.DiscPrice,r.TicketPrice=c.TicketPrice,r.total=c.SumTotal,r.ProdTotal=c.ProdTotal,r.objPrice={total:r.total,TicketPrice:r.TicketPrice,DiscPrice:r.DiscPrice},r.FloatList=c.FloatList,"{}"!==JSON.stringify(r.CardInfo)?Number(r.CardInfo.Balance)<Number(c.SumTotal)&&(r.radioPayType="2"):r.radioPayType="2",i.next=21;break;case 17:i.prev=17,i.t0=i["catch"](0),r.$toast.fail(i.t0),console.log(i.t0);case 21:case"end":return i.stop()}}),n,null,[[0,17]])})))()},areaSet:function(){this.areaInfo={},this.addEditArea=!0,this.$refs.addEditArea.open()},submitMoney:function(){if("{}"!==JSON.stringify(this.currentArea)||this.$Route.query.isIntegral){if(1===this.radioModes){if(!this.phone_user||""===this.phone_user)return void this.$toast("请填写手机号码");if(!(0,n.checkMobile)(this.phone_user))return void this.$toast("手机号格式错误");if(!this.name_user||""===this.name_user)return void this.$toast("请填写收件名字")}""!==this.password||"1"!==this.IsPass?"1"===this.radioPayType?(this.payTypePop=!0,this.$refs.payTypePop.open()):this.OrderCardPay():this.$toast("请填写密码")}else this.$toast("请选择地址")},OrderCardPay:function(){var t=this;return u(i.default.mark((function r(){var o,s,c,u,d,l,f,m,p,h;return i.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.isDisabled=!0,setTimeout((function(){t.isDisabled=!1}),5e3),o=t.radioModes,2===t.radioModes?t.currentDeliveryType.indexOf("2")>-1?o=2:t.currentDeliveryType.indexOf("3")>-1&&(o=3):o=1,"string"!==typeof t.currentItem&&(t.currentItem=JSON.stringify(t.currentItem)),s="",c="","takein"===t.$store.state.orderType&&(s=t.$store.state.currentLocation.longitude?t.$store.state.currentLocation.longitude:"",c=t.$store.state.currentLocation.latitude?t.$store.state.currentLocation.latitude:""),u=t.$store.state.currentStoreInfo||{},d=t.RecordTime.radioTime.split("-"),l={Action:"OrderPay",DeliveryType:o,UserName:2===t.radioModes?t.currentArea.Name:t.name_user,Mobile:1===t.radioModes?t.phone_user:t.currentArea.Mobile,Address:2===t.radioModes?t.currentArea.Address:"",ProdList:t.ProdJsonList,Longitude:"takein"===t.$store.state.orderType?s:t.currentArea.Longitude,Latitude:"takein"===t.$store.state.orderType?c:t.currentArea.Latitude,Province:t.currentArea.Province||"",ShopSID:1===t.radioModes?u.SID:"",UserRemarks:t.UserRemarks,PayType:t.radioPayType,PickDate:t.sidebarList[t.RecordTime.index],PickTime:d[0],CartSID:t.cardSids,BeneSID:"undefined"===t.radioBene?"暂不使用":t.radioBene,PrefNo:"undefined"===t.radioDiscount?"暂不使用":t.radioDiscount,TicketNo:"undefined"===t.radioTicket?"暂不使用":t.radioTicket,SumTotal:t.total,PassWord:t.password?t.password:"",ScoreDeduction:!0===t.allck?t.ScoreDeduction:""},JSON.parse(t.currentItem)[0].hasOwnProperty("PromotionItemSID")&&(l.PromotionItemSID=JSON.parse(t.currentItem)[0].PromotionItemSID),!t.$Route.query.isIntegral){r.next=22;break}if(f=JSON.parse(t.currentItem),l=f[0],l.Action="OrderPay",l.PayType=t.radioPayType,l.UserRemarks=t.UserRemarks,l.DeliveryType=1,t.CardInfo){r.next=22;break}return t.$toast.fail("未绑定微卡"),r.abrupt("return");case 22:return m=t.$Route.query.isIntegral?"UIntOrderOpera":"UOrderOpera",t.loading=!0,e.showLoading(),r.prev=25,r.next=28,(0,a.vipCard)(l,m);case 28:if(p=r.sent,h=p.Data,t.loading=!1,e.hideLoading(),t.$store.commit("SET_CURRENT_CARD",[]),e.removeStorageSync("alreadyPaid"),"1"===t.radioPayType)t.$toast("订单正在处理中..."),setTimeout((function(){t.$Router.push({path:"/pages/vip/allMyOrder",query:{id:"0"}})}),3e3),t.payTypePop=!1,t.$refs.payTypePop.close();else{t.testData=h;try{h.PaySuccess?(t.$toast("订单正在处理中..."),setTimeout((function(){t.$Router.push({path:"/pages/vip/allMyOrder",query:{id:"0"}})}),3e3)):(0,n.weChatPayment)(t,h,!1)}catch(i){t.$toast.fail(i),t.loading=!1,e.hideLoading()}}r.next=44;break;case 37:r.prev=37,r.t0=r["catch"](25),t.$toast.fail(r.t0),t.payTypePop=!1,t.$refs.payTypePop.close(),t.loading=!1,e.hideLoading();case 44:case"end":return r.stop()}}),r,null,[[25,37]])})))()}},filters:{setSex2:function(e){return 0==e?"先生":1==e?"女士":void 0}}};function m(e,t){var r=[],i="";e=Number(e);for(var a=0;a<e;a++){var o=864e5,s=t>=1?(new Date).getTime()+t*o:(new Date).getTime();i=a*o+s,r.push((0,n.getTime)(i,!0))}return r}function p(e,t,r){var i=t,a=[],o=[],s=3600,c=60*Number(e.IntervalMinute),u=h(e.EndTime),d=Number(h(e.StartTime)),l=h((0,n.getTime)(!1,!1,!0)),f=60*Number(t)*60;if((f+l).toFixed(2)>u){var m=parseInt(e.EndTime)-parseInt(e.StartTime),p=(Number(i),Number(i)%m),y=60*p*60;Number(f-(u-l)+d);while(Number(d+y)<=u)a.push(T(d+y)),d+=c;o=a}else{while(d<=u)a.push(T(d)),d+=c;0==r?a.forEach((function(e){e=h(e),0==r&&e>h((0,n.getTime)(!1,!1,!0))+Number(t)*s&&o.push(T(e))})):o=a}return{arr:a,arrToday:o}}function h(e){var t=0,r=e.split(":")[0],i=e.split(":")[1];e.split(":")[2];return t=Number(3600*r)+Number(60*i),t}function T(e){var t=parseInt(e),r=0,i=0,a="";return t>60&&(r=parseInt(t/60),t=parseInt(t%60),r>60&&(i=parseInt(r/60),r=parseInt(r%60))),i=i<10?"0"+i:i,r=r<10?"0"+r:r,t=t<10?"0"+t:t,a=i+":"+r,a}t.default=f}).call(this,r("c11b")["default"])}},[["3d38","common/runtime","common/vendor"]]]);