(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/shoppingMall/menu_naixue/menu/menu"],{"3daf":function(t,e,r){"use strict";var n,o=function(){},a=[];r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return a})),r.d(e,"a",(function(){return n}))},"4e08":function(t,e,r){"use strict";var n=r("ee1e"),o=r.n(n);o.a},"9d93":function(t,e,r){"use strict";r.r(e);var n=r("9dfd"),o=r.n(n);for(var a in n)"default"!==a&&function(t){r.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},"9dfd":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(r("4795")),o=i(r("c1d6")),a=r("57bb");function i(t){return t&&t.__esModule?t:{default:t}}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=l(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,a=!0,i=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function l(t,e){if(t){if("string"===typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h(t,e,r,n,o,a,i){try{var c=t[a](i),s=c.value}catch(u){return void r(u)}c.done?e(s):Promise.resolve(s).then(n,o)}function p(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){h(a,n,o,i,c,"next",t)}function c(t){h(a,n,o,i,c,"throw",t)}i(void 0)}))}}var S=function(){r.e("components/modal/modal").then(function(){return resolve(r("30be"))}.bind(null,r)).catch(r.oe)},m=function(){r.e("components/popup-layer/popup-layer").then(function(){return resolve(r("77e3"))}.bind(null,r)).catch(r.oe)},g=function(){r.e("components/uni-number-box/uni-number-box").then(function(){return resolve(r("b6a3"))}.bind(null,r)).catch(r.oe)},v={components:{modal:S,popupLayer:m,uniNumberBox:g},data:function(){return{goods:[],ads:[],loading:!0,currentCateId:6905,cateScrollTop:0,menuScrollIntoView:"",cart:[],goodDetailModalVisible:!1,good:{},category:{},cartPopupVisible:!1,sizeCalcState:!1,currentStoreInfo:{},addressName:{},attribute:[],norms:[],currentIndex:0,currentIndex2:-1,cooName:"",cooName2:"",MemberPrice:"",sizeSID:"",sizeProdNo:"",checkStatic:{},isStock:"",name:"",partsList:[],currentParts:[],goodsPrice:"",PartsArr:[],PartsNoArr:[],currentTastArr:[]}},onLoad:function(){var t=this;return p(n.default.mark((function e(){return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:case"end":return e.stop()}}),e)})))()},computed:{isActiveName:function(){return function(t){var e,r=d(this.checkStatic);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(t===n.Value.Name)return"isActive2"}}catch(o){r.e(o)}finally{r.f()}return""}},goodCartNum:function(){var t=this;return function(e){return t.cart.reduce((function(t,r){return r.ProdSID===e?t+r.BuyCnt:t}),0)}},menuCartNum:function(){var t=this;return function(e){return t.cart.reduce((function(t,r){return r.CateSID===e?t+r.BuyCnt:t}),0)}},getCartGoodsNumber:function(){return this.cart.reduce((function(t,e){return t+e.BuyCnt}),0)},getCartGoodsPrice:function(){return parseFloat(this.cart.reduce((function(t,e){return t+e.BuyCnt*e.SalePrice}),0).toFixed(2))},disabledPay:function(){return"takeout"==this.orderType&&this.getCartGoodsPrice<this.store.min_price},spread:function(){if("takeout"==this.orderType)return parseFloat((this.store.min_price-this.getCartGoodsPrice).toFixed(2))}},methods:{init:function(){var e=this;return p(n.default.mark((function r(){var o;return n.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.loading=!0,"Deflocation"!=e.$Route.query.flag){r.next=6;break}o=JSON.parse(localStorage.getItem("currentStoreInfo")),e.currentStoreInfo={Name:o.data.Name,Address:o.data.Address,SID:o.data.SID,Length:o.data.Length},r.next=9;break;case 6:if("takein"!==e.$store.state.orderType){r.next=9;break}return r.next=9,e.getShopList();case 9:return r.next=11,e.getTreeGoods();case 11:return r.next=13,e.getLunBoImg();case 13:e.loading=!1,e.cart=t.getStorageSync("cart")||[],e.addresses,e.addressName=JSON.parse(sessionStorage.getItem("takeOutAddress"));case 16:case"end":return r.stop()}}),r)})))()},getShopList:function(){var t=this;return p(n.default.mark((function e(){var r,o;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,a.vipCard)({Action:"GetShopList",Longitude:t.$store.state.currentLocation.longitude,Latitude:t.$store.state.currentLocation.latitude},"UShopOpera");case 2:r=e.sent,o=r.Data,t.currentStoreInfo={Name:o.ShopList[0].Name,Address:o.ShopList[0].Address,SID:o.ShopList[0].SID,Length:o.ShopList[0].Length,Longitude:o.ShopList[0].Longitude,Latitude:o.ShopList[0].Latitude},t.$store.commit("SET_CURRENT_STORE",t.currentStoreInfo);case 6:case"end":return e.stop()}}),e)})))()},getTreeGoods:function(){var t=this;return p(n.default.mark((function e(){var r,o;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,a.vipCard)({Action:"GetTreeProdList",SID:t.currentStoreInfo.SID,Name:t.name},"UProdOpera");case 3:r=e.sent,o=r.Data,t.goods=o.CateList,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},getLunBoImg:function(){var t=this;return p(n.default.mark((function e(){var r,o;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,a.vipCard)({Action:"GetImgList",Type:"4"},"UShopOpera");case 3:r=e.sent,o=r.Data,t.ads=o.BannerList,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},serch:function(t){this.name=t.detail.value,this.getTreeGoods()},search2:function(){this.getTreeGoods()},clear:function(){this.name="",this.getTreeGoods()},handleMenuTap:function(t){var e=this;this.sizeCalcState||this.calcSize(),this.currentCateId=t,this.$nextTick((function(){return e.cateScrollTop=e.goods.find((function(e){return e.SID==t})).top}))},handleGoodsScroll:function(t){var e=t.detail;this.sizeCalcState||this.calcSize();var r=e.scrollTop,n=this.goods.filter((function(t){return t.top<=r})).reverse();n.length>0&&(this.currentCateId=n[0].id)},calcSize:function(){var e=10,r=t.createSelectorQuery().select("#ads");r.fields({size:!0},(function(t){e+=Math.floor(t.height)})).exec(),this.goods.forEach((function(r){var n=t.createSelectorQuery().select("#cate-".concat(r.SID));n.fields({size:!0},(function(t){r.top=e,e+=t.height,r.bottom=e})).exec()})),this.sizeCalcState=!0},handleAddToCart:function(t,e,r){var n=this.cart.findIndex((function(t){return e.ParamInfo?t.SID===e.SID&&t.Describe===e.Describe:t.SID===e.SID}));if(n>-1)this.cart[n].BuyCnt+=r;else{var o={};if(o="2"==t.SpecType||"3"==t.SpecType?{ProdNo:e.ProdNo,SpecType:t.SpecType,BuyCnt:r,ProdSID:e.ProdSID,SpecSID:e.SID,Name:e.Name,SalePrice:e.MemberPrice?e.MemberPrice:e.SalePrice,Img:t.Img,ProdType:0,PartsNo:this.PartsNoArr,PartsList:this.PartsArr?JSON.stringify(this.PartsArr):[],ParamInfo:this.currentTastArr}:{ProdNo:e.ProdNo,SpecType:e.SpecType,ParamInfo:this.currentTastArr,BuyCnt:r,PartsList:"",ProdSID:e.SID,Name:e.Name,SalePrice:e.MemberPrice?e.MemberPrice:e.SalePrice,Img:e.Img,ProdType:0},0===this.cart.length)this.cart.push(o);else{var a=this.cart.some((function(t){return"2"==o.SpecType?o.ProdNo===t.ProdNo:"3"==o.SpecType?void 0:o.ProdSID===t.ProdSID}));if(a){var i=this.cart.findIndex((function(t){return t.ProdSID===o.ProdSID}));this.cart[i].BuyCnt=this.cart[i].BuyCnt+1}else this.cart.push(o)}}},handleReduceFromCart:function(t,e){var r=this.cart.findIndex((function(t){return t.ProdSID===e.SID}));this.cart[r].BuyCnt-=1,this.cart[r].BuyCnt<=0&&this.cart.splice(r,1)},showGoodDetailModal:function(t,e){var r=this;return p(n.default.mark((function o(){var i,c,u,d;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,i=JSON.parse(localStorage.getItem("currentStoreInfo")),n.next=4,(0,a.vipCard)({Action:"GetProdInfo",SID:e.SID,ShopSID:i?i.data.SID:""},"UProdOpera");case 4:c=n.sent,u=c.Data,d=u.ProdInfo,"1"!=d.State?r.isStock="已下架":"0"!=d.StockType&&d.StoreQty<="0"&&(r.isStock="已售罄"),u.SpecList&&(r.norms=u.SpecList||[],r.goodsPrice=r.norms[0].SalePrice,r.MemberPrice=r.norms[0].MemberPrice,r.cooName=r.norms[0].Name),u.AttributeList&&(r.attribute=u.AttributeList||[],r.checkStatic=r.attribute.map((function(t){return{Name:t.Name,Value:{Name:"",Price:""}}}))),u.PartsList&&(r.partsList=u.PartsList||[],r.partsList.forEach((function(t){r.$set(t,"Stepper",0)}))),r.good=JSON.parse(JSON.stringify(s({},d,{number:1}))),r.category=JSON.parse(JSON.stringify(t)),r.goodDetailModalVisible=!0,n.next=21;break;case 18:n.prev=18,n.t0=n["catch"](0),r.$toast(n.t0);case 21:case"end":return n.stop()}}),o,null,[[0,18]])})))()},closeGoodDetailModal:function(){this.goodDetailModalVisible=!1,this.category={},this.good={}},getGoodSelectedProps:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]},handlePropertyAdd:function(){this.good.number+=1},handlePropertyReduce:function(){1!==this.good.number&&(this.good.number-=1)},handleAddToCartInModal:function(t){var e=this;if(Number(this.good.StoreQty)<Number(this.valueStepper))this.$toast("商品库存不足！");else{var r=this.currentParts.every((function(t){return Number(t.StoreQty)>0}));r?(this.currentParts.length>0?(this.currentParts.forEach((function(t){e.PartsArr.push({ProdNo:t.ProdNo,BuyCnt:t.Stepper}),e.PartsNoArr.push(t.ProdNo)})),this.PartsNoArr=this.PartsNoArr.join(",")):(this.PartsArr="",this.PartsNoArr=""),"1"===t.SpecType?this.handleAddToCart(this.category,t,this.good.number):this.handleAddToCart(t,this.norms[this.currentIndex],this.good.number),this.closeGoodDetailModal()):this.$toast("配件库存不足！")}},openCartPopup:function(){this.cartPopupVisible=!this.cartPopupVisible},handleCartItemAdd:function(t){this.cart[t].BuyCnt+=1},handleCartItemReduce:function(t){1===this.cart[t].BuyCnt?this.cart.splice(t,1):this.cart[t].BuyCnt-=1,this.cart.length||(this.cartPopupVisible=!1)},handleCartClear:function(){var e=this;t.showModal({title:"提示",content:"确定清空购物车么",success:function(r){var n=r.confirm;n&&(e.cartPopupVisible=!1,e.cart=[],t.removeStorageSync("cart"))}})},toPay:function(){t.showLoading({title:"加载中"}),t.setStorageSync("cart",JSON.parse(JSON.stringify(this.cart)));try{var e={ProdList:[],Action:"SetShopCart"};e.ProdList=JSON.parse(JSON.stringify(this.cart));var r=this.cart;r.length>0&&(this.$store.commit("SET_CURRENT_CARD",r),this.$Router.push({path:"/pages/shoppingMall/order/confirmOrder",query:{flag:"order"}}))}catch(n){console.log(n)}t.hideLoading()},clickLeft:function(){this.$Router.push("/pages/shoppingMall/login")},toziqu:function(){this.$store.commit("SET_ORDER_TYPE","takein");var t=JSON.parse(localStorage.getItem("currentStoreInfo"));this.currentStoreInfo={Name:t.data.Name,Address:t.data.Address,SID:t.data.SID,Length:t.data.Length}},toShopAddress:function(){this.$Router.push({path:"/pages/myAddress/myAddress",query:{flag:"shop"}})},toAddress:function(){this.$store.commit("SET_ORDER_TYPE","takeout"),this.$Router.push({path:"/pages/myAddress/myAddress",query:{flag:"towaimai"}})},skuTopChoice:function(t,e){this.goodsPrice=e.SalePrice,this.cooName=e.Name,this.MemberPrice=e.MemberPrice,this.sizeSID=e.SID,this.sizeProdNo=e.ProdNo,this.currentIndex!==t&&(this.currentIndex=t)},bindChange:function(t,e){t.inputValue>0?this.$set(this.partsList[e],"isActive",!0):this.$set(this.partsList[e],"isActive",!1);var r=this.partsList;r.forEach((function(n){r[e].Stepper=t.inputValue}));var n=r.filter((function(t){return 0!==Number(t.Stepper)}));this.currentParts=P("parts",n)},overlimitParts:function(t){},clickStatic:function(t,e,r){var n,o=this,a=d(this.checkStatic);try{for(a.s();!(n=a.n()).done;){var i=n.value;t.Name===i.Name&&(i.Value.Name===e.Name?i.Value={}:i.Value=e)}}catch(s){a.e(s)}finally{a.f()}if(this.checkStatic.length>0){this.currentTastArr="";var c=0;this.checkStatic.forEach((function(t){c=Number(t.Value.Price),t.Value.Name&&(o.currentTastArr+=t.Value.Name+(0===c?"":"￥".concat(c))+",")})),this.currentTastArr=this.currentTastArr.substring(0,this.currentTastArr.length-1)}},getWxShare:function(){return p(n.default.mark((function t(){var e,r;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,a.vipCard)({Action:"GetJSSDK",Url:window.location.href},"UProdOpera");case 3:e=t.sent,r=e.Data,o.default.config({debug:!1,appId:"wxb7a2e9fc043daf1c",timestamp:r.SDK.timestamp,nonceStr:r.SDK.noncestr,signature:r.SDK.signature,jsApiList:["onMenuShareAppMessage","onMenuShareTimeline"]}),o.default.ready((function(t){console.log(t)})),o.default.error((function(t){console.log(t)})),t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})))()},share:function(){var t=window.location.href;window.share_config={share:{title:"这个是分享展示卡片的标题",dest:"这个是分享展示的说明",link:t,imgUrl:"",success:function(t){console.log("成功"+JSON.stringify(t))},cancel:function(t){console.log("失败"+JSON.stringify(t))}}},o.default.ready((function(){o.default.onMenuShareAppMessage(window.share_config.share),o.default.onMenuShareTimeline(window.share_config.share)})),o.default.error((function(t){console.log(t)}))}}};function P(t,e){function r(t){var e=null;return"parts"===t?(e="ProdNo",function(t,r){var n=t[e],o=r[e];return n-o}):(e="Name",function(t,r){return t[e].localeCompare(r[e],"zh-CN")})}return e=e.sort(r(t)),e}e.default=v}).call(this,r("c11b")["default"])},a293:function(t,e,r){"use strict";r.r(e);var n=r("3daf"),o=r("9d93");for(var a in o)"default"!==a&&function(t){r.d(e,t,(function(){return o[t]}))}(a);r("4e08");var i,c=r("f0c5"),s=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);e["default"]=s.exports},ee1e:function(t,e,r){},fc5e:function(t,e,r){"use strict";(function(t){r("d977");n(r("66fd"));var e=n(r("a293"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,r("c11b")["createPage"])}},[["fc5e","common/runtime","common/vendor"]]]);