(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/myAddress/myAddress"],{"06df":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("4795")),a=(r(n("b867")),n("57bb")),i=r(n("a055"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,o,a,i,r){try{var s=e[i](r),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(o,a)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function r(e){s(i,o,a,r,u,"next",e)}function u(e){s(i,o,a,r,u,"throw",e)}r(void 0)}))}}var c=function(){n.e("components/modal/modal").then(function(){return resolve(n("30be"))}.bind(null,n)).catch(n.oe)},d={mixins:[i.default],name:"myAddress",data:function(){return{title:"",scene:"menu",is_choose:!1,swipeOption:[{text:"删除",style:{backgroundColor:"#D12E32"}}],couponDetailModalShow:!1,showAreaList:!1,radioModes:2,addEditArea:!1,resultArea:"",areaList:[],areaInfo:{},currentDeliveryType:"",ShopAddress:{},Name:"",location:JSON.parse(sessionStorage.getItem("location")),ShopRadio:localStorage.getItem("ShopRadio")}},components:{modal:c},created:function(){this.getWxConfig(),"shop"==this.$Route.query.flag||"shopAuto"==this.$Route.query.flag?(this.title="门店地址",e.setNavigationBarTitle({title:"门店地址"}),this.getShopList()):(this.title="我的地址",this.getAddressList())},filters:{setSex2:function(e){return 0==e?"先生":1==e?"女士":void 0}},methods:{getAddressList:function(){var e=this;return u(o.default.mark((function t(){var n,i,r,s;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.vipCard)({Action:"GetAddressList",Type:1},"UMemberOpera");case 2:n=t.sent,i=n.Data,e.areaList=i.AddressList||[],r=0;case 6:if(!(r<e.areaList.length)){t.next=15;break}if("1"!=e.areaList[r].Defaults){t.next=9;break}return t.abrupt("return",sessionStorage.setItem("takeOutAddress",JSON.stringify(e.areaList[r])));case 9:s={Name:e.areaList[0].Name,Address:e.areaList[0].Address,SID:e.areaList[0].SID,Length:e.areaList[0].Length,House:e.areaList[0].House,Latitude:e.areaList[0].Latitude,Longitude:e.areaList[0].Longitude},e.$store.commit("SET_CURRENT_ADDRESS",s),sessionStorage.setItem("takeOutAddress",JSON.stringify(s));case 12:r++,t.next=6;break;case 15:case"end":return t.stop()}}),t)})))()},closeCouponDetailModal:function(){this.couponDetailModalShow=!1},chooseAddress:function(e){var t=this;return u(o.default.mark((function n(){var i,r,s,u;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("towaimai"!=t.$Route.query.flag&&"login"!=t.$Route.query.flag&&"AutoWaimai"!=t.$Route.query.flag&&"homeD"!=t.$Route.query.flag){n.next=22;break}return i={Name:e.Name,Address:e.Address+e.House,SID:e.SID,Length:e.Length,Mobile:e.Mobile,Longitude:e.Longitude,Latitude:e.Latitude},n.prev=2,n.next=5,(0,a.vipCard)({Action:"GetShopRecently",Latitude:e.Latitude,Longitude:e.Longitude},"UShopOpera");case 5:if(r=n.sent,s=r.Data,u={Address:s.ShopInfo.Address,Latitude:s.ShopInfo.Latitude,Longitude:s.ShopInfo.Longitude,Name:s.ShopInfo.Name,SID:s.ShopInfo.SID,Length:s.ShopInfo.Length},t.$store.commit("SET_CURRENT_ADDRESS",i),t.$store.commit("SET_CURRENT_STORE",u),sessionStorage.setItem("takeOutAddress",JSON.stringify(i)),t.$store.commit("SET_ORDER_TYPE","takeout"),"AutoWaimai"!=t.$Route.query.flag&&"2"!==t.ShopRadio){n.next=14;break}return n.abrupt("return",t.$Router.push("/pages/shoppingMall/index"));case 14:t.$Router.push({path:"/pages/shoppingMall/menu_naixue/menu/menu"}),n.next=20;break;case 17:n.prev=17,n.t0=n["catch"](2),n.t0.indexOf("距离超长")>-1&&setTimeout((function(){t.couponDetailModalShow=!0}),1500);case 20:n.next=23;break;case 22:console.log("555");case 23:case"end":return n.stop()}}),n,null,[[2,17]])})))()},add:function(){e.navigateTo({url:"/pages/myAddress/add"})},edit:function(e){this.$Router.push({path:"/pages/myAddress/add",query:{areaInfo:e}})},handleSwipeClick:function(t){var n=this;e.showModal({title:"提示",content:"确定要删除？",success:function(o){if(o.confirm){var i=(0,a.vipCard)({Action:"RemoveAddress",SID:t},"UMemberOpera");i.Data;e.showToast({title:"删除成功！",icon:"success"}),setTimeout((function(){n.getAddressList()}),100)}}})},addresses:function(){},clickLeft:function(){"AutoWaimai"==this.$Route.query.flag&&null==localStorage.getItem("addressInfo")&&this.$store.commit("SET_ORDER_TYPE","takein"),window.history.back(-1)},confirm:function(e){this.Name=e.value,this.getShopList()},getShopList:function(){var e=this;return u(o.default.mark((function t(){var n,i;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.vipCard)({Action:"GetShopList",Longitude:e.$store.state.currentLocation.longitude,Latitude:e.$store.state.currentLocation.latitude,Name:e.Name},"UShopOpera");case 2:n=t.sent,i=n.Data,e.ShopAddress=i.ShopList;case 5:case"end":return t.stop()}}),t)})))()},toDownOrder:function(e){var t={Name:e.Name,Address:e.Address,SID:e.SID,Length:e.Length,Longitude:e.Longitude,Latitude:e.Latitude};if(this.$store.commit("SET_CURRENT_STORE",t),"shopAuto"==this.$Route.query.flag)return localStorage.setItem("localShop",JSON.stringify(t)),this.$Router.push({path:"/pages/shoppingMall/index"});this.$Router.push({path:"/pages/shoppingMall/menu_naixue/menu/menu",query:{flag:"Deflocation"}})},call:function(t){e.makePhoneCall({phoneNumber:"Tel",success:function(e){console.log("调用成功!")},fail:function(e){console.log("调用失败!")}})}}};t.default=d}).call(this,n("c11b")["default"])},"68dc":function(e,t,n){"use strict";var o={uniNavBar:function(){return n.e("components/uni-nav-bar/uni-nav-bar").then(n.bind(null,"44c0"))},uniSearchBar:function(){return n.e("components/uni-search-bar/uni-search-bar").then(n.bind(null,"d1f9"))},uniSwipeAction:function(){return n.e("components/uni-swipe-action/uni-swipe-action").then(n.bind(null,"3dc0"))},uniSwipeActionItem:function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-swipe-action-item/uni-swipe-action-item")]).then(n.bind(null,"e305"))},modal:function(){return n.e("components/modal/modal").then(n.bind(null,"30be"))}},a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.areaList,(function(t,n){var o=e._f("setSex2")(t.Sex);return{$orig:e.__get_orig(t),f0:o}})));e.$mp.data=Object.assign({},{$root:{l0:n}})},i=[];n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}))},"9e4d":function(e,t,n){"use strict";n.r(t);var o=n("68dc"),a=n("d3f6");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("ea81");var r,s=n("f0c5"),u=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,"599cd711",null,!1,o["a"],r);t["default"]=u.exports},af39:function(e,t,n){"use strict";(function(e){n("d977");o(n("66fd"));var t=o(n("9e4d"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("c11b")["createPage"])},d3f6:function(e,t,n){"use strict";n.r(t);var o=n("06df"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},e387:function(e,t,n){},ea81:function(e,t,n){"use strict";var o=n("e387"),a=n.n(o);a.a}},[["af39","common/runtime","common/vendor"]]]);